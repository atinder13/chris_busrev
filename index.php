<?php 
ob_start();

 
 require_once 'config/config.php';

require_once CLASSPATH.'DB_Functions.php';
$DB= new DB_Functions();

 $pagetitle="TripOn - Home";  
   include_once('lib/header.php') ?>

        <div class="bg-holder">
            <div class="bg-mask-darken"></div>
            <div class="bg-parallax"></div>
            <!-- START GRIDROTATOR -->
            <div class="ri-grid" id="ri-grid">
                <ul>
                    <li>
                        <a href="#">
                            <img src="img/01.jpg" alt="Image Alternative text" title="In the bokeh forest" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/02.jpg" alt="Image Alternative text" title="Our Coffee miss u" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/03.jpg" alt="Image Alternative text" title="hotel PORTO BAY RIO INTERNACIONAL rooftop pool" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/04.jpg" alt="Image Alternative text" title="Playstation controller" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/05.jpg" alt="Image Alternative text" title="Gaviota en el Top" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/06.jpg" alt="Image Alternative text" title="196_365" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/07.jpg" alt="Image Alternative text" title="end of the day" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/08.jpg" alt="Image Alternative text" title="lack of blue depresses me" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/09.jpg" alt="Image Alternative text" title="Working in the Nature" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/10.jpg" alt="Image Alternative text" title="Bekohlicious Flower" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/11.jpg" alt="Image Alternative text" title="people on the beach" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/12.jpg" alt="Image Alternative text" title="Sydney Harbour" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/13.jpg" alt="Image Alternative text" title="sweet escape" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/14.jpg" alt="Image Alternative text" title="Street" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/15.jpg" alt="Image Alternative text" title="Play Ball" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/16.jpg" alt="Image Alternative text" title="El inevitable paso del tiempo" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/17.jpg" alt="Image Alternative text" title="Bekohlicious" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/18.jpg" alt="Image Alternative text" title="Spidy" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/19.jpg" alt="Image Alternative text" title="Sevenly Shirts - June 2012  2" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/20.jpg" alt="Image Alternative text" title="Viva Las Vegas" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/21.jpg" alt="Image Alternative text" title="the best mode of transport here in maldives" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/22.jpg" alt="Image Alternative text" title="The Big Showoff-Take 2" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/23.jpg" alt="Image Alternative text" title="a turn" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/24.jpg" alt="Image Alternative text" title="Rail Road" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/25.jpg" alt="Image Alternative text" title="new york at an angle" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/26.jpg" alt="Image Alternative text" title="waipio valley" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/27.jpg" alt="Image Alternative text" title="pink flowers" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/28.jpg" alt="Image Alternative text" title="cascada" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/29.jpg" alt="Image Alternative text" title="a dreamy jump" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/30.jpg" alt="Image Alternative text" title="Foots and grass" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/31.jpg" alt="Image Alternative text" title="4 Strokes of Fun" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/32.jpg" alt="Image Alternative text" title="Afro" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/33.jpg" alt="Image Alternative text" title="sunny wood" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/34.jpg" alt="Image Alternative text" title="b and w camera" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/35.jpg" alt="Image Alternative text" title="drifting days" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/36.jpg" alt="Image Alternative text" title="AMaze" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/37.jpg" alt="Image Alternative text" title="Pictures at the museum" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/38.jpg" alt="Image Alternative text" title="The Hidden Power of the Heart" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/39.jpg" alt="Image Alternative text" title="Street Yoga" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/40.jpg" alt="Image Alternative text" title="Sorry to Bust Your Bubble" />
                        </a>
                    </li>
                   <!--  <li>
                        <a href="#">
                            <img src="img/41.jpg" alt="Image Alternative text" title="Thyme" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/42.jpg" alt="Image Alternative text" title="Flare lens flare" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/43.jpg" alt="Image Alternative text" title="Cup on red" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/44.jpg" alt="Image Alternative text" title="Old No7" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/45.jpg" alt="Image Alternative text" title="New Year Greetings" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/46.jpg" alt="Image Alternative text" title="Gamer Chick" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/47.jpg" alt="Image Alternative text" title="Bridge" />
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/48.jpg" alt="Image Alternative text" title="Bubbles" />
                        </a>
                    </li> -->
                </ul>
            </div>
            <!-- END GRIDROTATOR -->
            <div class="bg-front full-center">
                <div class="container">
                    <div class="search-tabs search-tabs-bg" >
                        <h2 ><span style="background-color: #ed8323;">Transforming Bus Travel in Nigeria.</span></h2>
                        <div class="tabbable">
                          
                            <div class="tab-content">
                                <div class="tab-pane fade in active" id="tab-2">
                                   <!--  <h2>Search for Buses</h2> -->
                                    <form action="search-results.php" onsubmit="return checkform()">
                                    
                                        <div class="tabbable">
                                           <ul class="nav nav-pills nav-sm nav-no-br mb10" id="flightChooseTab">
                                             <li class="hreturn active" data-type="single"><a  data-toggle="tab">One Way</a>
                                                </li>
                                           <li class="hreturn" data-type="round"><a href="#" data-toggle="tab">Round Trip</a>
                                                </li>
                                               
                                               
                                            </ul> 
            
                                            <div class="tab-content">
                                                <div class="tab-pane fade in active" id="flight-search-1">
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="row">
                                                                <div class="col-md-6 col-xs-6">
                                                                    <div class="form-group form-group-lg form-group-icon-left"><i class="fas fa-map-marker-alt input-icon"></i>
                                                                        <label>From</label>
                                             <input id="search-box" class="form-control required" placeholder="From City" type="text" name="from" oninput="clientSelOpt(this,'fromid','getFromCity')"  autocomplete="something" />
                                                                    <input type="hidden" id="fromid"  name="fromid"> 
                                                                   </div>
                                                                </div>
                    
                                                                <div class="col-md-6  col-xs-6">
                                                                    <div class="form-group form-group-lg form-group-icon-left"><i class="fas fa-map-marker-alt input-icon"></i>
                                                                        <label>To</label>
                            <input id="search-to" class="form-control required" oninput="clientSelOpt(this,'toid','getToCity')" placeholder="To City" type="text" name="to"  autocomplete="something-new" />
                            
                            <input type="hidden" id="toid"  name="toid"> 
                                                                        
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="input-daterange" data-date-format="yyyy-mm-dd">
                                                                <div class="row">
                                                                    <div class="col-md-4  col-xs-6">
                                                                  <div class="form-group form-group-lg form-group-icon-left"><i class="far fa-calendar-alt input-icon input-icon-highlight"></i>
                                                                            <label>Departing</label>
                                                             <input class="date-pick form-control required" name="start" type="text" />
                                                                 </div>
                                                                    </div>
                                                             
                                                                   <div class="col-md-4  col-xs-6 returndiv" style="display:none">
                                                                        <div class="form-group form-group-lg form-group-icon-left"><i class="far fa-calendar-alt input-icon input-icon-highlight"></i>
                                                                            <label>Returning</label>
                                                                            <input class="form-control required" name="end" type="text" value="" />
                                                                        </div>
                                                                    </div>
                                                                    
                                                                    <div class="col-md-4  col-xs-6">
                                                                        <div class="form-group form-group-lg form-group-select-plus">
                                                                            <label>Passngers</label>
                                                                            <div class="btn-group btn-group-select-num" data-toggle="buttons">
                                                                                <label class="btn btn-primary inputcl active" data-val="1">
                                                                                    <input type="radio" name="options" />1</label>
                                                                                <label class="btn btn-primary inputcl" data-val="2">
                                                                                    <input type="radio" name="options"  />2</label>
                                                                                
                                                                                <label class="btn btn-primary">
                                                                                    <input type="radio" name="options"  />2+</label>
                                                                            </div>
                                                                            <select class="form-control hidden" name="passengers">
                                                                                <option  value="1" selected="selected">1</option>
                                                                                <option value="2">2</option>
                                                                                <option value="3">3</option>
                                                                                <option value="4" >4</option>
                                                                                <option value="5">5</option>
                                                                                <option value="6">6</option>
                                                                                <option value="7">7</option>
                                                                                <option value="8">8</option>
                                                                                <option value="9">9</option>
                                                                                <option value="10">10</option>
                                                                                <option value="11">11</option>
                                                                                <option value="12">12</option>
                                                                                <option value="13">13</option>
                                                                                <option value="14">14</option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            
                                            </div>
                                        <?php 
                                            $busTypes=$DB->busType();
                                            if($busTypes != false){
                                            ?>
                                               <div class="tab-content" style="margin-bottom: 2rem;">
                                                <span style="vertical-align: sub;"><a href="javascript:void(0)" id="flip"><i id="expandCheck" class="fa fa-plus box-icon-border " style="float: left;margin-right: 1rem;"></i>Amenities</a></span>
                                                <br>
                                            </div>

<div class="tab-content" style="margin-bottom: 2rem; min-height: 10rem;display:none" id="panel">
    
     <div class="col-md-2">
                                <?php 
                                $i=1;
                                            foreach($DBAmenities as $Key => $Type){
                                                if($i % 4 == 0){
                                                    
                                                echo '</div><div class="col-md-2">' ;
                                                }
                                                    
                                            ?>
                            <div class="checkbox checkbox-stroke">
                                <label>
                                    <input class="i-check" value="<?php echo $Key ?>"  name="bustypes[]" type="checkbox" /><?php echo ucfirst($Type) ?></label>
                            </div>
                           
                                            <?php 
                                                $i++;
                                            } ?>
                        </div>
                        
                       
</div>
                                            <?php } ?>
<input type="hidden" name="isreturn" id="is_return" value="F">
                                        </div>
                                        <button class="btn btn-primary btn-lg" type="submit">Search</button>
                                    </form>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <div class="container">
        </div>
        <div class="bg-color text-white">
            <div class="container">
                <div class="gap"></div>
            <center><h2>Go with TripOn.ng for:</h2></center>    
                <div class="gap"></div>
                <div class="row row-wrap" data-gutter="120">
                    <div class="col-md-4">
                        <div class="thumb">
                            <header class="thumb-header"><i class="far fa-clock box-icon-border no-line round box-icon-white box-icon-big"></i>
                            </header>



                            <div class="thumb-caption">
                                <h4 class="thumb-title">Real-time Inventory Update </h4>
                                <p class="thumb-desc">Seat availability are automatically updated when your booking is processed.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="thumb">
                            <header class="thumb-header"><i class="fas fa-bus box-icon-border no-line round box-icon-white box-icon-big"></i>
                            </header>
                            <div class="thumb-caption">
                                <h4 class="thumb-title">Bus Selection</h4>
                                <p class="thumb-desc">Choose a bus with your desired amenities – AC, Wifi, Power Outlets, TV/DVD, Extra Leg Room, etc.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="thumb">
                            <header class="thumb-header"><i class="fas fa-couch box-icon-border no-line round box-icon-white box-icon-big"></i>
                            </header>
                            <div class="thumb-caption">
                                <h4 class="thumb-title">Seat Selection</h4>
                                <p class="thumb-desc">Choose your seat on a specific trip, and that seat will be reserved for you.</p>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="row row-wrap" data-gutter="120">
                    <div class="col-md-4">
                        <div class="thumb">
                            <header class="thumb-header"><i class="fa fa-lock box-icon-border no-line round box-icon-white box-icon-big"></i>
                            </header>
                            <div class="thumb-caption">
                                <h4 class="thumb-title">Trust & Safety </h4>
                                <p class="thumb-desc">All payments & Personal Information are secured, as they are transmitted using TLS encryption.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="thumb">
                            <header class="thumb-header"><i class="fas fa-dollar-sign no-line box-icon-border round box-icon-white box-icon-big"></i>
                            </header>
                            <div class="thumb-caption">
                                <h4 class="thumb-title">Best Price Guarantee </h4>
                                <p class="thumb-desc">See all scheduled trips & fares of all the bus operators that service a chosen route. Then choose the best price available in the market.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="thumb">
                            <header class="thumb-header"><i class="fas fa-pencil-alt no-line box-icon-border round box-icon-white box-icon-big"></i>
                            </header>
                            <div class="thumb-caption">
                                <h4 class="thumb-title">Ratings & Reviews</h4>
                                <p class="thumb-desc">User experiences and their ratings of operators will help you make your travel decisions.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="gap gap-small"></div>
            </div>
        </div>
        <div class="container">
        </div>
        <div class="special-area">
            <div class="owl-carousel owl-slider owl-carousel-area" id="owl-carousel-slider">
            <?php 
            
            $getSlides=$DB->getSlides();
            if(count($getSlides) > 0){
                foreach($getSlides as $Slide){
                    if(!empty($Slide['slide']))
                ?>
                <div class="bg-holder full text-center text-white">
                    <div class="bg-mask"></div>
                    <div class="bg-img" style="background-image:url(<?php echo ROOTURL.'img/slides/'.$Slide['slide'] ?>);"></div>
                    <div class="bg-front full-center">
                        <div class="owl-cap">
                          
                            <h1 class="owl-cap-title"><?php echo $Slide['name'] ?></h1>
                            <div class="owl-cap-price"><small>from</small>
                                <h5>₦<?php echo $Slide['minprice'] ?></h5>
                            </div><a class="btn btn-white btn-ghost" href="operator-buses.php?op=<?php echo $Slide['operator_id'] ?>"><i class="fa fa-angle-right"></i> Explore</a>
                        </div>
                    </div>
                </div>
                <?php 
                }
            }               
                ?>
                
            </div>
        </div>
        <div class="container">
            <div class="gap"></div>
            <h2 class="text-center mb20">Top Travel Destinations</h2>
            <div class="row row-wrap">
            <?php 
            $today=date('Y-m-d');
            $PopCities=$DB->getpopCity();
            foreach($PopCities as $City){
            ?>
            
                <div class="col-md-3">
                    <div class="thumb">
                        <header class="thumb-header">
                            <a class="hover-img curved" href="search-results.php?from=<?php echo $City['name'] ?>&fromid=<?php echo $City['pickup_id'] ?>&to=<?php echo $City['rname'] ?>&toid=<?php echo $City['return_id'] ?>&start=<?php echo $today ?>&end=<?php echo $today ?>&passengers=1&isreturn=F">
                                <img src="img/the_journey_home_400x300.jpg" alt="Image Alternative text" title="the journey home" /><i class="fa fa-plus box-icon-white box-icon-border hover-icon-top-right round"></i>
                            </a>
                        </header>
                        <div class="thumb-caption">
                            <h4 class="thumb-title"><?php echo $City['name'] ?></h4>
                            
                        </div>
                    </div>
                </div>
            <?php } ?>
               
               
              
            </div>
            <div class="gap gap-small"></div>
        </div>


   <?php 
   
   include_once('lib/footer.php') ?>
     

      
        <script> 
$(document).ready(function(){
  $("#flip").click(function(){
    $("#panel").fadeToggle();

      if ($('#expandCheck').hasClass('fa-plus'))
        {
$('#expandCheck').removeClass('fa-plus');
$('#expandCheck').addClass('fa-minus');
        }
        else
        {
$('#expandCheck').removeClass('fa-minus');
$('#expandCheck').addClass('fa-plus');
        }

        
  });
    

 });    
 
    var date = new Date();
date.setDate(date.getDate());

 $(".inputcl").click(function(){
     
    $('select option[value="' + $(this).attr('data-val') +'"]').prop("selected", true);
  });
  
         $(".hreturn").click(function(){
    
   var type=$(this).attr('data-type');

   if(type == 'round'){
    $('input[name="end"]').val($('input[name="start"]').val());
     $('input[name="end"]').datepicker('setStartDate', $('input[name="start"]').val());
       $('.returndiv').fadeIn();
   }
   else{
        

        $('.returndiv').fadeOut();
   }
  });
    

    
$('input.date-pick, .input-daterange input[name="start"]').datepicker({format:'yyyy-mm-dd',autoclose:true,   startDate: date}).datepicker('setDate','today');


$('input.date-pick, .input-daterange input[name="end"]').datepicker({format:'yyyy-mm-dd',autoclose:true,setStartDate:date}).datepicker('setDate','today');

    $('input[name="start"]').datepicker({
        todayBtn:  1,
        autoclose: true,
    }).on('changeDate', function (selected) {
        var minDate = new Date(selected.date.valueOf());
        $('input[name="end"]').datepicker('setStartDate', minDate);
        $('input[name="end"]').datepicker('setDate',minDate);
         //$('input[name="end"]').val($('input[name="start"]').val());
    });
    
    $('input[name="end"]').datepicker()
        .on('changeDate', function (selected) {
            var minDate = new Date(selected.date.valueOf());
           
        });

    function clientSelOpt(t,main,action) {
    var id='#'+t.id;
    
       $(id).autocomplete({
  source: function( request, response ) {
   // Fetch data
   $.ajax({
    url: "cpresponse.php",
    type: 'post',
    dataType: "json",
    data: {
     search: request.term,action:action
    },
    success: function( data ) {
      response( $.map( data, function( item ) {

                        return {    label: item.label,
                                    value: item.label,
                                    mid: item.value,
                                   

                                    }
                    }));
    }
   });
  },
   change: function(event,ui) {
       console.log('df');
   },
  select: function (event, ui) {
   // Set selection

   $(id).val(ui.item.label); // display the selected text
  $('#'+main).val(ui.item.mid); // save selected id to input
   return false;
  },
      
  
 }).focus(function () {
    
    $(this).autocomplete("search");
  }).autocomplete( "instance" )._renderItem = function( ul, item ) {


      return $( "<li>" )
        .append( "<div class='underline'><i class='fa fa-map-marker' aria-hidden='true'></i> " + item.label + "</div>" )
        .appendTo( ul );
    };


  }
  
    

    function checkform(){
    
    var type=$('#flightChooseTab').find('.active').attr('data-type');
    if(type == 'single'){
        var req='required';
        $('#is_return').val('F');
    }
    else{
        var req='required';
        $('#is_return').val('T');
    }
    
     var errorCounter = validateForm(req);

     if (errorCounter > 0) {
        
        return false;
    }
    else{
        return true;
    }
  }
  
       function validateForm(cls) {
      // error handling
      var errorCounter = 0;
        var cs='.'+cls;
        
      $("."+cls).each(function(i, obj) {
        
          if($(this).val() === ''){
              $(this).parent().addClass("has-error");
              errorCounter++;
          } else{ 
              $(this).parent().removeClass("has-error"); 
          }


      });

      return errorCounter;
  }


 
</script>

</body>


</html>



